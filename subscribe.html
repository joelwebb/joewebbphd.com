<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Joe Webb, PhD</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="./style.css" rel="stylesheet">
    <script>
        if (localStorage.getItem('dark-mode') === 'false' || !('dark-mode' in localStorage)) {
            document.querySelector('html').classList.remove('dark');
        } else {
            document.querySelector('html').classList.add('dark');
        }
    </script>    
</head>

<body class="font-inter antialiased bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-200 tracking-tight">

    <div class="max-w-7xl mx-auto">
        <div class="min-h-screen flex">

            <!-- Side navigation -->
            <div id="sidebar-container"></div>

            <!-- Main content -->
            <main class="grow overflow-hidden px-6">
                <div class="w-full h-full max-w-[1072px] mx-auto flex flex-col">

                    <!-- Header -->
                    <header>
                        <div class="flex items-center justify-between h-16 before:block">

                            <div class="grow flex justify-end space-x-4">

                                <!-- Light switch -->
                                <div class="flex flex-col justify-center ml-3">
                                    <input type="checkbox" name="light-switch" id="light-switch" class="light-switch sr-only" />
                                    <label class="relative cursor-pointer p-2" for="light-switch">
                                        <svg class="dark:hidden" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                            <path class="fill-slate-300" d="M7 0h2v2H7zM12.88 1.637l1.414 1.415-1.415 1.413-1.413-1.414zM14 7h2v2h-2zM12.95 14.433l-1.414-1.413 1.413-1.415 1.415 1.414zM7 14h2v2H7zM2.98 14.364l-1.413-1.415 1.414-1.414 1.414 1.415zM0 7h2v2H0zM3.05 1.706 4.463 3.12 3.05 4.535 1.636 3.12z" />
                                            <path class="fill-slate-400" d="M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z" />
                                        </svg>
                                        <svg class="hidden dark:block" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                            <path class="fill-slate-400" d="M6.2 1C3.2 1.8 1 4.6 1 7.9 1 11.8 4.2 15 8.1 15c3.3 0 6-2.2 6.9-5.2C9.7 11.2 4.8 6.3 6.2 1Z" />
                                            <path class="fill-slate-500" d="M12.5 5a.625.625 0 0 1-.625-.625 1.252 1.252 0 0 0-1.25-1.25.625.625 0 1 1 0-1.25 1.252 1.252 0 0 0 1.25-1.25.625.625 0 1 1 1.25 0c.001.69.56 1.249 1.25 1.25a.625.625 0 1 1 0 1.25c-.69.001-1.249.56-1.25 1.25A.625.625 0 0 1 12.5 5Z" />
                                        </svg>
                                        <span class="sr-only">Switch to light / dark version</span>
                                    </label>
                                </div>

                                <!-- Button -->
                                <div>
                                    <a class="btn-sm text-slate-100 bg-sky-500 hover:bg-sky-600" href="subscribe.html">Subscribe</a>
                                </div>

                            </div>

                        </div>
                    </header>

                    <!-- Content -->
                    <div class="grow md:flex space-y-8 md:space-y-0 md:space-x-8 pt-12 md:pt-16 pb-16 md:pb-20">

                        <!-- Middle area -->
                        <div class="grow">
                            <div class="max-w-[700px]">

                                <div class="space-y-10">

                                    <section>
                                        <!-- Page title -->
                                        <h1 class="h1 font-aspekta mb-5">Never miss an update ✨</h1>
                                        <!-- Page content -->
                                        <div class="text-slate-500 dark:text-slate-400 space-y-8">
                                            <p class="text-lg">This newsletter is written by Mark Ivings, who previously worked at Google, Medium, Vimeo, and Qonto. Here is what to expect by subscribing:</p>
                                            <ul class="space-y-4">
                                                <li class="flex items-start">
                                                    <svg class="w-3 h-3 fill-current text-sky-500 mr-3 mt-1.5 shrink-0" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10.28 2.28L3.989 8.575 1.695 6.28A1 1 0 00.28 7.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28 2.28z"></path>
                                                    </svg>
                                                    <span>Growing AI projects, from the inside.</span>
                                                </li>
                                                <li class="flex items-start">
                                                    <svg class="w-3 h-3 fill-current text-sky-500 mr-3 mt-1.5 shrink-0" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10.28 2.28L3.989 8.575 1.695 6.28A1 1 0 00.28 7.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28 2.28z"></path>
                                                    </svg>
                                                    <span>Actionable advice for lowering AI costs in production.</span>
                                                </li>
                                                <li class="flex items-start">
                                                    <svg class="w-3 h-3 fill-current text-sky-500 mr-3 mt-1.5 shrink-0" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10.28 2.28L3.989 8.575 1.695 6.28A1 1 0 00.28 7.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28 2.28z"></path>
                                                    </svg>
                                                    <span>A pulse on the AI field and scoop worth knowing.</span>
                                                </li>
                                                <li class="flex items-start">
                                                    <svg class="w-3 h-3 fill-current text-sky-500 mr-3 mt-1.5 shrink-0" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M10.28 2.28L3.989 8.575 1.695 6.28A1 1 0 00.28 7.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28 2.28z"></path>
                                                    </svg>
                                                    <span>An independent viewpoint. </span>
                                                </li>
                                            </ul>
                                            <div>
                                                <!-- Subscribe form -->
                                                <form id="subscribeForm" method="POST" action="https://script.google.com/macros/s/AKfycbx-YITB6pZivfS3N1fGKLpqGkjhlVphMGjDRVciK4boovwaSLgOdPFAZWVQMhzoPip8tQ/exec">
                                                    <div class="flex flex-col md:flex-row justify-center max-w-xs mx-auto md:max-w-md md:mx-0">
                                                        <input name="Email" type="email" class="form-input w-full mb-2 md:mb-0 md:mr-2" placeholder="Your email" aria-label="Your email…" required />
                                                        <button type="submit" class="btn text-white bg-sky-500 hover:bg-sky-600">Subscribe</button>
                                                    </div>
                                                    <!-- Success message -->
                                                    <!-- <p class="text-xs text-slate-500 mt-3 italic">Thanks for subscribing!</p> -->
                                                </form>

                                                <!-- Human Verification Modal -->
                                                <div id="humanModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                                                    <div class="bg-white dark:bg-slate-800 p-6 rounded-lg max-w-md mx-4">
                                                        <h3 class="text-lg font-aspekta font-[650] mb-4">Human Verification</h3>
                                                        <p class="text-slate-600 dark:text-slate-400 mb-4">Please confirm you are human before subscribing.</p>
                                                        <div class="flex items-center mb-6">
                                                            <input type="checkbox" id="humanCheck" class="form-checkbox mr-3">
                                                            <label for="humanCheck" class="text-sm">I am human</label>
                                                        </div>
                                                        <div class="flex space-x-3">
                                                            <button id="confirmHuman" class="btn text-white bg-sky-500 hover:bg-sky-600 disabled:opacity-50" disabled>Confirm</button>
                                                            <button id="cancelModal" class="btn text-slate-600 bg-slate-200 hover:bg-slate-300">Cancel</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flex items-center mt-5">
                                                    <div class="inline-flex -space-x-3 -ml-0.5">
                                                        <img class="rounded-full border-2 border-white dark:border-slate-800 box-content" src="./images/avatar-01.jpg" width="24" height="24" alt="Avatar 01">
                                                        <img class="rounded-full border-2 border-white dark:border-slate-800 box-content" src="./images/avatar-02.jpg" width="24" height="24" alt="Avatar 02">
                                                        <img class="rounded-full border-2 border-white dark:border-slate-800 box-content" src="./images/avatar-03.jpg" width="24" height="24" alt="Avatar 03">
                                                        <img class="rounded-full border-2 border-white dark:border-slate-800 box-content" src="./images/avatar-04.jpg" width="24" height="24" alt="Avatar 04">
                                                        <img class="rounded-full border-2 border-white dark:border-slate-800 box-content" src="./images/avatar-05.jpg" width="24" height="24" alt="Avatar 05">
                                                    </div>
                                                    <div class="text-sm text-slate-500 ml-3">Join 100K+ developers.</div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                    <section>                                    
                                        <!-- Cards -->
                                        <div class="grid sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-2 gap-5">
                                            <a class="rounded-lg border border-slate-200 dark:border-slate-800 dark:bg-gradient-to-t dark:from-slate-800 dark:to-slate-800/30 odd:-rotate-1 even:rotate-1 hover:rotate-0 transition-transform duration-700 hover:duration-100 ease-in-out p-5" href="#0">
                                                <div class="flex flex-col h-full">
                                                    <div class="grow">
                                                        <img class="rounded-full mb-2" src="./images/testimonial-01.jpg" width="40" height="40" alt="Testimonial 01">
                                                        <div class="text-lg font-aspekta font-[650] mb-1">“ Incredible Value “</div>
                                                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-2">I was able to learn something new from every newsletter!</p>
                                                    </div>
                                                    <div class="text-xs font-aspekta font-[650] text-sky-500">— Mary Coyle</div>
                                                </div>
                                            </a>
                                            <a class="rounded-lg border border-slate-200 dark:border-slate-800 dark:bg-gradient-to-t dark:from-slate-800 dark:to-slate-800/30 odd:-rotate-1 even:rotate-1 hover:rotate-0 transition-transform duration-700 hover:duration-100 ease-in-out p-5" href="#0">
                                                <div class="flex flex-col h-full">
                                                    <div class="grow">
                                                        <img class="rounded-full mb-2" src="./images/testimonial-02.jpg" width="40" height="40" alt="Testimonial 02">
                                                        <div class="text-lg font-aspekta font-[650] mb-1">“ The Best Newsletter “</div>
                                                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-2"> I'm grateful for the resources Joe provided and would recommend him to anyone.</p>
                                                    </div>
                                                    <div class="text-xs font-aspekta font-[650] text-sky-500">— Daniel Burka</div>
                                                </div>
                                            </a>
                                        </div>

                                    </section>

                                </div>

                            </div>
                        </div>

                        <!-- Right sidebar -->
                        <div id="right-sidebar-container"></div>

                    </div>

                    <!-- Footer -->
                    <div id="footer-container"></div>

                </div>
            </main>

        </div>
    </div>

    <style>
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
    <script src="./js/vendors/alpinejs.min.js" defer></script>
    <script src="./js/main.js"></script>
    <script>
        // Load sidebar component
        fetch('sidebar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('sidebar-container').innerHTML = html;
            })
            .catch(error => {
                console.error('Error loading sidebar:', error);
            });
        
        // Load footer component
        fetch('footer.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('footer-container').innerHTML = html;
            })
            .catch(error => {
                console.error('Error loading footer:', error);
            });
        
        // Load right sidebar component
        fetch('right_sidebar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('right-sidebar-container').innerHTML = html;
            })
            .catch(error => {
                console.error('Error loading right sidebar:', error);
            });

        // Human verification modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('subscribeForm');
            const modal = document.getElementById('humanModal');
            const checkbox = document.getElementById('humanCheck');
            const confirmBtn = document.getElementById('confirmHuman');
            const cancelBtn = document.getElementById('cancelModal');
            let formData = null;

            // Intercept form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                formData = new FormData(form);
                modal.classList.remove('hidden');
            });

            // Enable/disable confirm button based on checkbox
            checkbox.addEventListener('change', function() {
                confirmBtn.disabled = !checkbox.checked;
            });

            // Handle confirm button
            confirmBtn.addEventListener('click', function() {
                if (checkbox.checked) {
                    modal.classList.add('hidden');
                    // Submit the form via AJAX
                    submitFormAjax();
                }
            });

            // Function to submit form via AJAX
            function submitFormAjax() {
                const email = form.querySelector('input[name="Email"]').value;
                const formData = new FormData();
                formData.append('Email', email);

                // Show loading state
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Submitting...';
                submitBtn.disabled = true;

                // Add spinning icons to benefit list
                const benefitItems = document.querySelectorAll('.space-y-4 li');
                benefitItems.forEach(item => {
                    const checkIcon = item.querySelector('svg');
                    if (checkIcon) {
                        checkIcon.style.display = 'none';
                        const spinningIcon = document.createElement('div');
                        spinningIcon.className = 'spinning-icon w-3 h-3 mr-3 mt-1.5 shrink-0';
                        spinningIcon.innerHTML = '<svg class="animate-spin text-sky-500" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';
                        checkIcon.parentNode.insertBefore(spinningIcon, checkIcon);
                    }
                });

                fetch('https://script.google.com/macros/s/AKfycbx-YITB6pZivfS3N1fGKLpqGkjhlVphMGjDRVciK4boovwaSLgOdPFAZWVQMhzoPip8tQ/exec', {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    // Redirect to success page regardless of response
                    window.location.href = 'success.html';
                })
                .catch(error => {
                    console.error('Error:', error);
                    // Still redirect to success page to avoid showing errors to user
                    window.location.href = 'success.html';
                })
                .finally(() => {
                    // Reset button state
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    
                    // Remove spinning icons and restore check icons
                    const spinningIcons = document.querySelectorAll('.spinning-icon');
                    spinningIcons.forEach(icon => icon.remove());
                    const checkIcons = document.querySelectorAll('.space-y-4 li svg');
                    checkIcons.forEach(icon => {
                        icon.style.display = 'block';
                    });
                });
            }

            // Handle cancel button
            cancelBtn.addEventListener('click', function() {
                modal.classList.add('hidden');
                checkbox.checked = false;
                confirmBtn.disabled = true;
            });

            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                    checkbox.checked = false;
                    confirmBtn.disabled = true;
                }
            });
        });
    </script>

</body>

</html>